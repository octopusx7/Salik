<!-- templates/index.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Visual Pollution Video Detection</title>
    <style>
        @import url("https://fonts.googleapis.com/css2?family=Poppins:wght@200;300;400;500;600;700;800;900&display=swap");

        .footer {
  position: relative;
  width: 92.5%;
  background: #3586ff;
  min-height: 100px;
  padding: 20px 50px;
  display: flex;
  justify-content: center;
  align-items: center;
  flex-direction: column;
  margin-top:100px ;
}

.social-icon,
.menu {
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  margin: 10px 0;
  flex-wrap: wrap;
}

.social-icon__item,
.menu__item {
  list-style: none;
}

.social-icon__link {
  font-size: 2rem;
  color: #fff;
  margin: 0 10px;
  display: inline-block;
  transition: 0.5s;
}
.social-icon__link:hover {
  transform: translateY(-10px);
}

.menu__link {
  font-size: 1.2rem;
  color: #fff;
  margin: 0 10px;
  display: inline-block;
  transition: 0.5s;
  text-decoration: none;
  opacity: 0.75;
  font-weight: 300;
}

.menu__link:hover {
  opacity: 1;
}

.footer p {
  color: #fff;
  margin: 15px 0 10px 0;
  font-size: 1rem;
  font-weight: 300;
}

.wave {
  position: absolute;
  top: -100px;
  left: 0;
  width: 100%;
  height: 100px;
  background: url("https://i.ibb.co/wQZVxxk/wave.png");
  background-size: 1000px 100px;
}

.wave#wave1 {
  z-index: 1000;
  opacity: 1;
  bottom: 0;
  animation: animateWaves 4s linear infinite;
}

.wave#wave2 {
  z-index: 999;
  opacity: 0.5;
  bottom: 10px;
  animation: animate 4s linear infinite !important;
}

.wave#wave3 {
  z-index: 1000;
  opacity: 0.2;
  bottom: 15px;
  animation: animateWaves 3s linear infinite;
}

.wave#wave4 {
  z-index: 999;
  opacity: 0.7;
  bottom: 20px;
  animation: animate 3s linear infinite;
}

@keyframes animateWaves {
  0% {
    background-position-x: 1000px;
  }
  100% {
    background-position-x: 0px;
  }
}

@keyframes animate {
  0% {
    background-position-x: -1000px;
  }
  100% {
    background-position-x: 0px;
  }
}


        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    text-align: center;
    margin: 0;
    padding: 0;
    min-height: 100vh;
    display: inline-flexbox;
    flex-direction: column;
    justify-content: space-between;
    overflow-y: scroll;
    height: 900px;
        }
        header {
	background: url('http://www.autodatz.com/wp-content/uploads/2017/05/Old-Car-Wallpapers-Hd-36-with-Old-Car-Wallpapers-Hd.jpg');
	text-align: center;
	width: 100%;
	height: auto;
	background-size: cover;
	background-attachment: fixed;
	position: relative;
	overflow: hidden;
	border-radius: 0 0 85% 85% / 30%;
}
header .overlay {
  width: 100%;
  height: 100%;
  padding: 50px;
  color: #FFF;
  text-shadow: 1px 1px 1px #333;
  background-image: linear-gradient(135deg, rgba(5, 117, 230, 0.7) 10%, rgba(0, 242, 96, 0.7) 100%);
}
h3, p {
	font-family: 'Open Sans', sans-serif;
	margin-bottom: 30px;
}

        video#background-video {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 120%;
            object-fit: cover;
            margin-top: -1px;
            margin-left: -1px;
            z-index: -1; /* Place it behind other elements */
            filter: blur(5px); /* Add a blur effect to the video */
        }

        h1 {
            color: #ffffff;
            z-index: 1; /* Place it above the video */
        }

        form, #output-container, #download-button {
            z-index: 1; /* Place these elements above the video */
            padding: 20px;
            margin: 20px;
            border-radius: 10px;
        }

        label {
            font-size: 18px;
            margin-bottom: 10px;
            color: rgb(255, 255, 255)
        }

        #file {
            display: none;
        }

        .custom-file-upload {
            padding: 10px 20px;
            background-color: #3498db;
            color: #fff;
            border: none;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s;
            display: inline-block;
        }



        video {
            max-width: 100%;
            margin-top: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }


        #download-button:hover {
            background-color: #27ae60;
        }

    </style>
</head>
<body>
  <header>
    <div class="overlay">
  <h1 style="padding-right:110px ;">Salik</h1>
  <script>
    // Get the current URL
    var currentURL = window.location.href;
  
    // Append "/image" to the current URL
    var imageURL = currentURL + "/image";
  
    // Set the href attribute of the anchor tag
    document.getElementById("imageLink").href = imageURL;
  </script>
  <p style="padding-right:110px ;">To make the road better</p>
  <br>
  <p style="padding-right:110px ;">If you want to try the model using an image, click <a id="imageLink" href="/image">here</a>.</p>
      </div>
  </header>
  
    <video id="background-video" autoplay loop muted>
        <source src="{{ video_url }}" type="video/mp4">
        Your browser does not support the video tag.
    </video>



    <form id="upload-form" enctype="multipart/form-data">
        <label for="file">Select a video file:</label>
        <div style="display: flex; flex-direction: column; align-items: center;">
            <label class="custom-file-upload" for="file">Choose File</label>
            <input type="file" id="file" accept=".mp4" required style="display: none;" onchange="displaySelectedVideo(this)">
            <video id="selected-video" width="320" height="240" controls style="max-width: 100%; border: 1px solid #ddd; border-radius: 4px; margin-bottom: 10px;"></video>
        </div>
        <button type="button" onclick="uploadVideo()" class="custom-file-upload">Upload Video</button>
    </form>

    <div id="output-container"></div>
    <button id="download-button" onclick="downloadVideo()">Download Video</button>
    
  <footer class="footer">
    <div class="waves">
      <div class="wave" id="wave1"></div>
      <div class="wave" id="wave2"></div>
      <div class="wave" id="wave3"></div>
      <div class="wave" id="wave4"></div>
    </div>
    <ul style="text-align: center;margin-bottom: 0px;" class="social-icon">
      <li class="social-icon__item"><a class="social-icon__link" href="https://www.linkedin.com/in/abdullah-alajalin-b98185211/">
          <ion-icon name="logo-linkedin"></ion-icon>
        </a></li>
      <li class="social-icon__item"><a class="social-icon__link" href="https://www.linkedin.com/in/aliawadalmutairi/">
          <ion-icon name="logo-linkedin"></ion-icon>
        </a></li>
      <li class="social-icon__item"><a class="social-icon__link" href="https://www.linkedin.com/in/salehbinshaheen/">
          <ion-icon name="logo-linkedin"></ion-icon>
        </a></li>    
    </ul>
    <ul style="text-align: center;margin-top: 0px;" class="social-icon">
      <li style="margin-left: 10px;" class="social-icon__item">
        
        <p>Abdullah</p>
        
      </li>
      <li style="margin-left: 10px;" class="social-icon__item">
        
        <p> </p>
        
      </li>
      <li style="margin-left: 10px;" class="social-icon__item">
        
        <p> </p>
        
      </li>
      <li style="margin-left: 10px;" class="social-icon__item">
        
        <p> </p>
        
      </li>
      <li class="social-icon__item">
        <p>Ali</p>
      </li>
      <li style="margin-left: 10px;" class="social-icon__item">
        
        <p> </p>
        
      </li>
      <li style="margin-left: 10px;" class="social-icon__item">
        
        <p> </p>
        
      </li><li style="margin-left: 10px;" class="social-icon__item">
        
        <p> </p>
        
      </li>
      <li class="social-icon__item">
        <p>Saleh</p>
      </li>
      <li style="margin-left: 10px;" class="social-icon__item">
        
        <p> </p>
        
      </li>
      <li style="margin-left: 10px;" class="social-icon__item">
        
        <p> </p>
        
      </li>
      <li style="margin-left: 10px;" class="social-icon__item">
        
        <p> </p>
        
      </li>    
    </ul>
    <ul class="menu">
      <li class="menu__item"><a class="menu__link" href="#">Home</a></li>
      <li class="menu__item"><a class="menu__link" href="#">About</a></li>
      <li class="menu__item"><a class="menu__link" href="#">Services</a></li>
      <li class="menu__item"><a class="menu__link" href="#">Team</a></li>
      <li class="menu__item"><a class="menu__link" href="#">Contact</a></li>

    </ul>
    <p>&copy;2024 Salik | All Rights Reserved</p>
  </footer>
  <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
  <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>

    <script>
        function displaySelectedVideo(input) {
            var selectedVideo = document.getElementById('selected-video');
            var file = input.files[0];

            if (file) {
                var reader = new FileReader();

                reader.onload = function (e) {
                    selectedVideo.src = e.target.result;
                };

                reader.readAsDataURL(file);
            }
        }

        function uploadVideo() {
            var inputVideo = document.getElementById('file').files[0];

            var formData = new FormData();
            formData.append('file', inputVideo);

            fetch('/', {
                method: 'POST',
                body: formData
            })
            .then(response => {
                if (!response.ok) {
                    throw new Error('Video upload failed');
                }
                return response.blob();
            })
            .then(data => {
                displayOutput(data);
            })
            .catch(error => {
                console.error('Error:', error);
            });
        }

        function displayOutput(data) {
            var outputContainer = document.getElementById('output-container');
            outputContainer.innerHTML = '';

            if (data instanceof Blob) {
                var outputVideo = document.createElement('video');
                outputVideo.src = URL.createObjectURL(data);
                outputVideo.width = 320;
                outputVideo.height = 240;
                outputVideo.controls = true;
                outputVideo.style.maxWidth = '100%';
                outputVideo.style.border = '1px solid #ddd';
                outputVideo.style.borderRadius = '4px';
                outputContainer.appendChild(outputVideo);
            } else {
                console.error('Invalid response format');
            }
        }

        function downloadVideo() {
            var outputVideo = document.getElementById('output-container').getElementsByTagName('video')[0];
            var downloadLink = document.createElement('a');
            downloadLink.href = outputVideo.src;
            downloadLink.download = 'output.mp4';
            downloadLink.click();
        }
    </script>
</body>
</html>
